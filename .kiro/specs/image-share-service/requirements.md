# 要件定義書

## 概要

個人用の画像シェアサービスを構築します。このサービスはCloudflare R2ストレージを使用して画像を保存し、ユーザーが画像をアップロード、管理、共有できる機能を提供します。単一ユーザー向けのシンプルなサービスとして設計されます。

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、画像をサービスにアップロードして、オンラインで保存・共有したい。

#### 受け入れ基準

1. 画像ファイルを選択したとき、システムは一般的な画像形式（JPEG、PNG、GIF、WebP）を受け入れること
2. 画像をアップロードしたとき、システムはCloudflare R2ストレージに保存すること
3. アップロードが完了したとき、システムは画像の共有可能なURLを提供すること
4. 画像ファイルが10MBより大きい場合、システムはエラーメッセージと共にアップロードを拒否すること

### 要件 2

**ユーザーストーリー:** ユーザーとして、アップロードした全ての画像を表示して、画像コレクションを管理したい。

#### 受け入れ基準

1. 画像ギャラリーにアクセスしたとき、システムはアップロードした全ての画像のサムネイルを表示すること
2. サムネイルをクリックしたとき、システムはフルサイズの画像を表示すること
3. 画像を表示したとき、システムはアップロード日時とファイルサイズを表示すること
4. ギャラリーが読み込まれたとき、システムは画像をアップロード日時順（新しい順）でソートすること

### 要件 3

**ユーザーストーリー:** ユーザーとして、不要になった画像を削除して、ストレージ使用量を管理したい。

#### 受け入れ基準

1. 削除する画像を選択したとき、システムは確認を求めること
2. 削除を確認したとき、システムはR2ストレージから画像を削除すること
3. 削除が完了したとき、システムはギャラリー表示から画像を削除すること
4. 削除に失敗した場合、システムはエラーメッセージを表示し、画像を保持すること

### 要件 4

**ユーザーストーリー:** ユーザーとして、画像の共有可能なリンクをコピーして、他の人と簡単に共有したい。

#### 受け入れ基準

1. 画像を表示したとき、システムは「リンクをコピー」ボタンを提供すること
2. 「リンクをコピー」をクリックしたとき、システムは公開URLをクリップボードにコピーすること
3. 共有URLにアクセスした人は、認証なしで画像を表示できること
4. リンクを生成したとき、それは画像ファイルへの直接リンクであること

### 要件 5

**ユーザーストーリー:** ユーザーとして、サービスが高速で応答性が良いことで、効率的に画像を管理したい。

#### 受け入れ基準

1. 画像をアップロードしたとき、システムはアップロード進捗を表示すること
2. ギャラリーが読み込まれたとき、3秒以内に表示されること
3. 画像間を移動したとき、システムは1秒以内に応答すること
4. 画像が読み込まれるとき、より良いユーザー体験のためにプログレッシブローディングを使用すること

### 要件 6

**ユーザーストーリー:** ユーザーとして、基本的な画像情報が表示されることで、画像をより良く整理したい。

#### 受け入れ基準

1. 画像詳細を表示したとき、システムはファイル名、サイズ、アップロード日時を表示すること
2. サムネイルにマウスオーバーしたとき、システムは基本情報を含むツールチップを表示すること
3. ギャラリーを表示したとき、システムは画像の総数と使用ストレージ量を表示すること
4. 画像の読み込みに失敗した場合、システムはエラー情報を含むプレースホルダーを表示すること